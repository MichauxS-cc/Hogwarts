{"ast":null,"code":"var _jsxFileName = \"/Users/michauxsun/CPSC455/CPSC455-A234/my_hogwarts_app/src/components/DiagonAlley.js\",\n    _s = $RefreshSig$();\n\n// addToCauldron() and removeFromCauldron() logic were borrow from https://www.youtube.com/watch?v=AmIdY1Eb8tY\nimport React, { useState, useEffect } from \"react\";\nimport \"../css/DiagonAlley.css\";\nimport EquipList from \"./EquipList.js\";\nimport Summery from \"./Summery.js\";\nimport ShoppingCart from \"./ShoppingCart.js\";\nimport HarryPotterFontImg from \"../pics/harry-potter-font-img.png\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction DiagonAlley() {\n  _s();\n\n  const [equipments, setEquipments] = useState([]);\n  const equipmentDataURL = \"http://localhost:3000/equipDb\";\n  const [cartItems, setCartItems] = useState([]);\n  const [modal, setModal] = useState({\n    visible: false\n  });\n\n  const getEquipmentData = async () => {\n    const response = await axios.get(equipmentDataURL).catch(err => console.log(\"Error *** first load: \", err));\n    if (response && response.data) setEquipments(response.data);\n  };\n\n  useEffect(() => {\n    getEquipmentData();\n  }, []); // accept the equip that needs to be added to the cart\n  // exist is to try to find the item x, whose name === the equip.name that I need to add\n  // if exist, increase the quantity of that equip\n\n  const addToCauldron = equip => {\n    const exist = cartItems.find(x => x.name === equip.name);\n\n    if (exist) {\n      //loop through cartItems, only update the x that x => x.name === equip.name, return the not matching item otherwise\n      setCartItems(cartItems.map(x => x.name === equip.name ? { ...exist,\n        qty: exist.qty + 1\n      } : x));\n    } else {\n      setCartItems([...cartItems, { ...equip,\n        qty: 1\n      }]);\n    }\n  };\n\n  const removeFromCauldron = equip => {\n    const exist = cartItems.find(x => x.name === equip.name);\n\n    if (exist.qty === 1) {\n      setCartItems([...cartItems].filter(x => x.name !== equip.name));\n    } else {\n      setCartItems(cartItems.map(x => x.name === equip.name ? { ...exist,\n        qty: exist.qty - 1\n      } : x));\n    }\n  };\n\n  function showSummery() {\n    let newModal = { ...modal\n    };\n    newModal.visible = true;\n    setModal(newModal);\n  }\n\n  function closeModal() {\n    let newModal = { ...modal\n    };\n    newModal.visible = false;\n    setModal(newModal);\n  }\n\n  function resetCart() {\n    alert(\"Order Received!\");\n    setCartItems([]);\n  }\n\n  function sortByPriceHL() {\n    const sortedData = async () => {\n      const response = await axios.get(equipmentDataURL + \"/sortHtoL\").catch(err => console.log(\"Error *** sort data H to L: \", err));\n      if (response && response.data) setEquipments(response.data);\n    };\n\n    sortedData();\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"header-img\",\n            src: HarryPotterFontImg,\n            alt: \"Harry Potter fonts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overlay-black\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => sortByPriceHL(),\n          className: \"btn \",\n          type: \"button\",\n          children: [\" \", \"Price High to Low\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn \",\n          type: \"button\",\n          children: [\" \", \"Sort by year stand\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"yearSelect\",\n          onclick: \"\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"allYear\",\n            children: \" \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"year1\",\n            children: \"1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"year2\",\n            children: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"year3\",\n            children: \"3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"year4\",\n            children: \"4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ShoppingCart, {\n          countEquipments: cartItems.length,\n          showModal: showSummery\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(EquipList, {\n          addToCauldron: addToCauldron,\n          equipments: equipments\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Summery, {\n        modal: modal,\n        closeModal: closeModal,\n        addToCauldron: addToCauldron,\n        removeFromCauldron: removeFromCauldron,\n        cartItems: cartItems,\n        resetCart: resetCart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n\n_s(DiagonAlley, \"5dHDakfyhL+iXnfDawgajSeDKf8=\");\n\n_c = DiagonAlley;\nexport default DiagonAlley;\n\nvar _c;\n\n$RefreshReg$(_c, \"DiagonAlley\");","map":{"version":3,"sources":["/Users/michauxsun/CPSC455/CPSC455-A234/my_hogwarts_app/src/components/DiagonAlley.js"],"names":["React","useState","useEffect","EquipList","Summery","ShoppingCart","HarryPotterFontImg","axios","DiagonAlley","equipments","setEquipments","equipmentDataURL","cartItems","setCartItems","modal","setModal","visible","getEquipmentData","response","get","catch","err","console","log","data","addToCauldron","equip","exist","find","x","name","map","qty","removeFromCauldron","filter","showSummery","newModal","closeModal","resetCart","alert","sortByPriceHL","sortedData","length"],"mappings":"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","sourcesContent":["// addToCauldron() and removeFromCauldron() logic were borrow from https://www.youtube.com/watch?v=AmIdY1Eb8tY\n\nimport React, { useState, useEffect } from \"react\";\nimport \"../css/DiagonAlley.css\";\nimport EquipList from \"./EquipList.js\";\nimport Summery from \"./Summery.js\";\nimport ShoppingCart from \"./ShoppingCart.js\";\nimport HarryPotterFontImg from \"../pics/harry-potter-font-img.png\";\n\nimport axios from \"axios\";\n\nfunction DiagonAlley() {\n  const [equipments, setEquipments] = useState([]);\n  const equipmentDataURL = \"http://localhost:3000/equipDb\";\n\n  const [cartItems, setCartItems] = useState([]);\n  const [modal, setModal] = useState({ visible: false });\n\n  const getEquipmentData = async () => {\n    const response = await axios\n      .get(equipmentDataURL)\n      .catch((err) => console.log(\"Error *** first load: \", err));\n\n    if (response && response.data) setEquipments(response.data);\n  };\n  useEffect(() => {\n    getEquipmentData();\n  }, []);\n\n  // accept the equip that needs to be added to the cart\n  // exist is to try to find the item x, whose name === the equip.name that I need to add\n  // if exist, increase the quantity of that equip\n  const addToCauldron = (equip) => {\n    const exist = cartItems.find((x) => x.name === equip.name);\n    if (exist) {\n      //loop through cartItems, only update the x that x => x.name === equip.name, return the not matching item otherwise\n      setCartItems(\n        cartItems.map((x) =>\n          x.name === equip.name ? { ...exist, qty: exist.qty + 1 } : x\n        )\n      );\n    } else {\n      setCartItems([...cartItems, { ...equip, qty: 1 }]);\n    }\n  };\n\n  const removeFromCauldron = (equip) => {\n    const exist = cartItems.find((x) => x.name === equip.name);\n    if (exist.qty === 1) {\n      setCartItems([...cartItems].filter((x) => x.name !== equip.name));\n    } else {\n      setCartItems(\n        cartItems.map((x) =>\n          x.name === equip.name ? { ...exist, qty: exist.qty - 1 } : x\n        )\n      );\n    }\n  };\n\n  function showSummery() {\n    let newModal = { ...modal };\n    newModal.visible = true;\n    setModal(newModal);\n  }\n\n  function closeModal() {\n    let newModal = { ...modal };\n    newModal.visible = false;\n    setModal(newModal);\n  }\n\n  function resetCart() {\n    alert(\"Order Received!\");\n    setCartItems([]);\n  }\n\n  function sortByPriceHL() {\n    const sortedData = async () => {\n      const response = await axios\n        .get(equipmentDataURL + \"/sortHtoL\")\n        .catch((err) => console.log(\"Error *** sort data H to L: \", err));\n\n      if (response && response.data) setEquipments(response.data);\n    };\n    sortedData();\n  }\n\n  return (\n    <div>\n      <div className=\"max-container\">\n        <h1>\n          <div>\n            <img\n              className=\"header-img\"\n              src={HarryPotterFontImg}\n              alt=\"Harry Potter fonts\"\n            ></img>\n          </div>\n        </h1>\n        <div className=\"overlay-black\">\n          <button\n            onClick={() => sortByPriceHL()}\n            className=\"btn \"\n            type=\"button\"\n          >\n            {\" \"}\n            Price High to Low{\" \"}\n          </button>\n          <button className=\"btn \" type=\"button\">\n            {\" \"}\n            Sort by year stand{\" \"}\n          </button>\n          <select id=\"yearSelect\" onclick=\"\">\n            <option value=\"allYear\"> </option>\n            <option value=\"year1\">1</option>\n            <option value=\"year2\">2</option>\n            <option value=\"year3\">3</option>\n            <option value=\"year4\">4</option>\n          </select>\n\n          <ShoppingCart\n            countEquipments={cartItems.length}\n            showModal={showSummery}\n          />\n\n          <EquipList addToCauldron={addToCauldron} equipments={equipments} />\n        </div>\n        <Summery\n          modal={modal}\n          closeModal={closeModal}\n          addToCauldron={addToCauldron}\n          removeFromCauldron={removeFromCauldron}\n          cartItems={cartItems}\n          resetCart={resetCart}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default DiagonAlley;\n"]},"metadata":{},"sourceType":"module"}