{"ast":null,"code":"import _regeneratorRuntime from\"/Users/michauxsun/CPSC455/CPSC455-A234/my-hogwarts-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/michauxsun/CPSC455/CPSC455-A234/my-hogwarts-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";// addToCauldron() and removeFromCauldron() logic were borrow from https://www.youtube.com/watch?v=AmIdY1Eb8tY\nimport React,{useEffect,useRef}from\"react\";import\"../css/DiagonAlley.css\";import EquipList from\"./EquipList.js\";import{useDispatch}from\"react-redux\";import{setEquipmentList}from\"../actions\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DiagonAlley(){// const equipmentList = useSelector((state) => state.equipmentList);\nvar dispatch=useDispatch();var equipmentDataURL=\"/db/equipment\";var yearSelect=useRef();var catSelect=useRef();useEffect(function(){function getEquipmentData(){return _getEquipmentData.apply(this,arguments);}function _getEquipmentData(){_getEquipmentData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(equipmentDataURL).catch(function(err){return console.log(\"Error *** first load: \",err);});case 2:response=_context.sent;if(response===null||response===void 0?void 0:response.data){dispatch(setEquipmentList(response.data));}case 4:case\"end\":return _context.stop();}}},_callee);}));return _getEquipmentData.apply(this,arguments);}getEquipmentData();},[dispatch]);function getProducts(){var year=yearSelect.current.value;var cat=catSelect.current.value;var sortByYearAndCat=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(equipmentDataURL+\"/sortByYear/\"+year+\"/filterCat/\"+cat);case 2:response=_context2.sent;if(response===null||response===void 0?void 0:response.data){dispatch(setEquipmentList(response.data));}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function sortByYearAndCat(){return _ref.apply(this,arguments);};}();sortByYearAndCat();}function sortByPriceHL(){var sortHtoL=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get(equipmentDataURL+\"/sortHtoL\");case 2:response=_context3.sent;if(response===null||response===void 0?void 0:response.data){dispatch(setEquipmentList(response.data));}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function sortHtoL(){return _ref2.apply(this,arguments);};}();sortHtoL();}function sortByPriceLH(){var sortLtoH=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.get(equipmentDataURL+\"/sortLtoH\");case 2:response=_context4.sent;if(response===null||response===void 0?void 0:response.data){dispatch(setEquipmentList(response.data));}case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function sortLtoH(){return _ref3.apply(this,arguments);};}();sortLtoH();}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"select\",{id:\"yearSelect\",ref:yearSelect,onChange:getProducts,children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"All year \"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1st year\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2nd year\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3rd year\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4th year\"})]}),/*#__PURE__*/_jsxs(\"select\",{id:\"catSelect\",ref:catSelect,onChange:getProducts,children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All categories \"}),/*#__PURE__*/_jsx(\"option\",{value:\"book\",children:\"Book \"}),/*#__PURE__*/_jsx(\"option\",{value:\"gear\",children:\"Gear\"}),/*#__PURE__*/_jsx(\"option\",{value:\"powder\",children:\"Powder\"}),/*#__PURE__*/_jsx(\"option\",{value:\"uncategorised\",children:\"Uncategorised\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return sortByPriceHL();},className:\"btn \",type:\"button\",children:[\" \",\"Price High to Low\",\" \"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return sortByPriceLH();},className:\"btn \",type:\"button\",children:[\" \",\"Price Low to High\",\" \"]}),/*#__PURE__*/_jsx(EquipList,{})]});}export default DiagonAlley;","map":{"version":3,"sources":["/Users/michauxsun/CPSC455/CPSC455-A234/my-hogwarts-app/src/components/DiagonAlley.js"],"names":["React","useEffect","useRef","EquipList","useDispatch","setEquipmentList","axios","DiagonAlley","dispatch","equipmentDataURL","yearSelect","catSelect","getEquipmentData","get","catch","err","console","log","response","data","getProducts","year","current","value","cat","sortByYearAndCat","sortByPriceHL","sortHtoL","sortByPriceLH","sortLtoH"],"mappings":"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","sourcesContent":["// addToCauldron() and removeFromCauldron() logic were borrow from https://www.youtube.com/watch?v=AmIdY1Eb8tY\n\nimport React, { useEffect, useRef } from \"react\";\nimport \"../css/DiagonAlley.css\";\nimport EquipList from \"./EquipList.js\";\n\nimport { useDispatch } from \"react-redux\";\nimport { setEquipmentList } from \"../actions\";\n\nimport axios from \"axios\";\n\nfunction DiagonAlley() {\n  // const equipmentList = useSelector((state) => state.equipmentList);\n  const dispatch = useDispatch();\n  const equipmentDataURL = \"/db/equipment\";\n  const yearSelect = useRef();\n  const catSelect = useRef();\n\n  useEffect(() => {\n    async function getEquipmentData() {\n      const response = await axios\n        .get(equipmentDataURL)\n        .catch((err) => console.log(\"Error *** first load: \", err));\n\n      if (response?.data) {\n        dispatch(setEquipmentList(response.data));\n      }\n    }\n    getEquipmentData();\n  }, [dispatch]);\n\n  function getProducts() {\n    let year = yearSelect.current.value;\n    let cat = catSelect.current.value;\n\n    const sortByYearAndCat = async () => {\n      const response = await axios.get(\n        equipmentDataURL + \"/sortByYear/\" + year + \"/filterCat/\" + cat\n      );\n\n      if (response?.data) {\n        dispatch(setEquipmentList(response.data));\n      }\n    };\n    sortByYearAndCat();\n  }\n\n  function sortByPriceHL() {\n    const sortHtoL = async () => {\n      const response = await axios.get(equipmentDataURL + \"/sortHtoL\");\n\n      if (response?.data) {\n        dispatch(setEquipmentList(response.data));\n      }\n    };\n    sortHtoL();\n  }\n\n  function sortByPriceLH() {\n    const sortLtoH = async () => {\n      const response = await axios.get(equipmentDataURL + \"/sortLtoH\");\n\n      if (response?.data) {\n        dispatch(setEquipmentList(response.data));\n      }\n    };\n    sortLtoH();\n  }\n\n  return (\n    <div>\n      <select id=\"yearSelect\" ref={yearSelect} onChange={getProducts}>\n        <option value=\"0\">All year </option>\n        <option value=\"1\">1st year</option>\n        <option value=\"2\">2nd year</option>\n        <option value=\"3\">3rd year</option>\n        <option value=\"4\">4th year</option>\n      </select>\n\n      <select id=\"catSelect\" ref={catSelect} onChange={getProducts}>\n        <option value=\"all\">All categories </option>\n        <option value=\"book\">Book </option>\n        <option value=\"gear\">Gear</option>\n        <option value=\"powder\">Powder</option>\n        <option value=\"uncategorised\">Uncategorised</option>\n      </select>\n\n      <button onClick={() => sortByPriceHL()} className=\"btn \" type=\"button\">\n        {\" \"}\n        Price High to Low{\" \"}\n      </button>\n      <button onClick={() => sortByPriceLH()} className=\"btn \" type=\"button\">\n        {\" \"}\n        Price Low to High{\" \"}\n      </button>\n\n      <EquipList />\n    </div>\n  );\n}\n\nexport default DiagonAlley;\n"]},"metadata":{},"sourceType":"module"}