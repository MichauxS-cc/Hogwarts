{"ast":null,"code":"import React,{useRef,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{setBuddyList}from\"../actions\";import\"../css/StudyGroup.css\";import BuddyList from\"./BuddyList.js\";import Modal from\"./Modal.js\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function StudyGroup(){const inputName=useRef();//to get user input\nconst inputImgURL=useRef();const inputDescription=useRef();const buddyList=useSelector(state=>state.buddyList);const dispatch=useDispatch();const buddyListURL=\"/db/buddy\";useEffect(()=>{const getBuddylistData=async()=>{const response=await axios.get(buddyListURL);if(response!==null&&response!==void 0&&response.data)dispatch(setBuddyList(response.data));};getBuddylistData();},[dispatch]);// add card to buddyList by creating a new array with the new user input\n// input: name, imgURL\nfunction addCard(){let name=inputName.current.value;let imgURL=inputImgURL.current.value;let description=inputDescription.current.value;if(name===\"\"||imgURL===\"\")return alert(\"Error *** adding new buddy: user name and img url can't be empty\");const newBuddy={name:name,imgURL:imgURL,description:description};const addNewBuddy=async()=>{const response=await axios.post(buddyListURL+\"/add\",newBuddy);//optional chaining to check if response and response data both exist\nif(response!==null&&response!==void 0&&response.data)dispatch(setBuddyList(response.data));};addNewBuddy();clearInput();}function removeCard(){const removeName=inputName.current.value;console.log(\"User wants to delete: \"+(removeName===\"\"?\"empty String\":removeName));if(removeName===\"\"){return alert(\"Error *** remove a buddy: Please enter a buddy name to remove\");}const findTheBuddyToRemove=buddyList.find(buddy=>buddy.name===removeName);if(!findTheBuddyToRemove){return alert(removeName+\" is not in your list.\");}const removeBuddy=async()=>{const response=await axios.delete(buddyListURL+\"/delete/\",{params:{name:removeName}});if(response&&response.data)dispatch(setBuddyList(response.data));};removeBuddy();clearInput();}function clearInput(){inputName.current.value=inputImgURL.current.value=inputDescription.current.value=null;}function clearAll(){const deleteAll=async()=>{const response=await axios.delete(buddyListURL+\"/delete_all\").catch(err=>{console.error(err);});if(response&&response.data)dispatch(setBuddyList(response.data));};deleteAll();clearInput();}return/*#__PURE__*/_jsxs(\"div\",{className:\"card-selection\",children:[/*#__PURE__*/_jsx(\"h1\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"header-img\",src:\"https://see.fontimg.com/api/renderfont4/MVZ6w/eyJyIjoiZnMiLCJoIjo3OCwidyI6MTAwMCwiZnMiOjc4LCJmZ2MiOiIjRDBBQjIyIiwiYmdjIjoiI0YzMTkxOSIsInQiOjF9/Q2hvb3NlIFlvdXIgU3R1ZHkgQnVkZHk/harry-p.png\",alt:\"Harry Potter fonts\"})}),/*#__PURE__*/_jsxs(\"form\",{id:\"card-selection-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-input-wrapper\",children:[/*#__PURE__*/_jsx(\"label\",{id:\"name-label\",forhtml:\"card-name\",children:\"Buddy's Name:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{ref:inputName,type:\"text\",id:\"card-name\",name:\"cname\"}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-input-wrapper\",children:[/*#__PURE__*/_jsx(\"label\",{id:\"url-label\",forhtml:\"card-URL\",children:\"Address (URL):\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{ref:inputImgURL,type:\"text\",id:\"card-URL\",name:\"url\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-input-wrapper\",children:[/*#__PURE__*/_jsx(\"label\",{id:\"description-label\",forhtml:\"card-URL\",children:\"Add Buddy Description (Optional):\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{ref:inputDescription,type:\"text\",id:\"card-description\",name:\"description\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex right\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>addCard(),className:\"btn btn-add\",type:\"button\",children:\"Add New Buddy\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeCard(),className:\"btn btn-remove\",type:\"button\",children:\"Remove\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>clearInput(),className:\"btn btn-clear-input\",type:\"button\",children:\"Clear Input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>clearAll(),className:\"btn btn-clear-all\",type:\"button\",children:\"Clear All\"})]})]}),/*#__PURE__*/_jsx(BuddyList,{buddyList:buddyList}),/*#__PURE__*/_jsx(Modal,{})]});}export default StudyGroup;","map":{"version":3,"names":["React","useRef","useEffect","useSelector","useDispatch","setBuddyList","BuddyList","Modal","axios","jsx","_jsx","jsxs","_jsxs","StudyGroup","inputName","inputImgURL","inputDescription","buddyList","state","dispatch","buddyListURL","getBuddylistData","response","get","data","addCard","name","current","value","imgURL","description","alert","newBuddy","addNewBuddy","post","clearInput","removeCard","removeName","console","log","findTheBuddyToRemove","find","buddy","removeBuddy","delete","params","clearAll","deleteAll","catch","err","error","className","children","src","alt","id","forhtml","ref","type","onClick"],"sources":["/Users/michauxsun/Desktop/CPSC455-A234/my-hogwarts-app/src/components/StudyGroup.js"],"sourcesContent":["import React, { useRef, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setBuddyList } from \"../actions\";\nimport \"../css/StudyGroup.css\";\nimport BuddyList from \"./BuddyList.js\";\nimport Modal from \"./Modal.js\";\n\nimport axios from \"axios\";\n\nfunction StudyGroup() {\n  const inputName = useRef(); //to get user input\n  const inputImgURL = useRef();\n  const inputDescription = useRef();\n\n  const buddyList = useSelector((state) => state.buddyList);\n  const dispatch = useDispatch();\n  const buddyListURL = \"/db/buddy\";\n\n  useEffect(() => {\n    const getBuddylistData = async () => {\n      const response = await axios.get(buddyListURL);\n\n      if (response?.data) dispatch(setBuddyList(response.data));\n    };\n    getBuddylistData();\n  }, [dispatch]);\n\n  // add card to buddyList by creating a new array with the new user input\n  // input: name, imgURL\n  function addCard() {\n    let name = inputName.current.value;\n    let imgURL = inputImgURL.current.value;\n    let description = inputDescription.current.value;\n\n    if (name === \"\" || imgURL === \"\")\n      return alert(\n        \"Error *** adding new buddy: user name and img url can't be empty\"\n      );\n\n    const newBuddy = {\n      name: name,\n      imgURL: imgURL,\n      description: description,\n    };\n\n    const addNewBuddy = async () => {\n      const response = await axios.post(buddyListURL + \"/add\", newBuddy);\n\n      //optional chaining to check if response and response data both exist\n      if (response?.data) dispatch(setBuddyList(response.data));\n    };\n\n    addNewBuddy();\n    clearInput();\n  }\n\n  function removeCard() {\n    const removeName = inputName.current.value;\n    console.log(\n      \"User wants to delete: \" +\n        (removeName === \"\" ? \"empty String\" : removeName)\n    );\n\n    if (removeName === \"\") {\n      return alert(\n        \"Error *** remove a buddy: Please enter a buddy name to remove\"\n      );\n    }\n    const findTheBuddyToRemove = buddyList.find(\n      (buddy) => buddy.name === removeName\n    );\n    if (!findTheBuddyToRemove) {\n      return alert(removeName + \" is not in your list.\");\n    }\n\n    const removeBuddy = async () => {\n      const response = await axios.delete(buddyListURL + \"/delete/\", {\n        params: { name: removeName },\n      });\n\n      if (response && response.data) dispatch(setBuddyList(response.data));\n    };\n    removeBuddy();\n\n    clearInput();\n  }\n\n  function clearInput() {\n    inputName.current.value =\n      inputImgURL.current.value =\n      inputDescription.current.value =\n        null;\n  }\n\n  function clearAll() {\n    const deleteAll = async () => {\n      const response = await axios\n        .delete(buddyListURL + \"/delete_all\")\n        .catch((err) => {\n          console.error(err);\n        });\n\n      if (response && response.data) dispatch(setBuddyList(response.data));\n    };\n\n    deleteAll();\n    clearInput();\n  }\n\n  return (\n    <div className=\"card-selection\">\n      <h1>\n        <img\n          className=\"header-img\"\n          src=\"https://see.fontimg.com/api/renderfont4/MVZ6w/eyJyIjoiZnMiLCJoIjo3OCwidyI6MTAwMCwiZnMiOjc4LCJmZ2MiOiIjRDBBQjIyIiwiYmdjIjoiI0YzMTkxOSIsInQiOjF9/Q2hvb3NlIFlvdXIgU3R1ZHkgQnVkZHk/harry-p.png\"\n          alt=\"Harry Potter fonts\"\n        ></img>\n      </h1>\n      <form id=\"card-selection-form\">\n        <div className=\"card-input-wrapper\">\n          <label id=\"name-label\" forhtml=\"card-name\">\n            Buddy's Name:\n          </label>\n          <br />\n          <input ref={inputName} type=\"text\" id=\"card-name\" name=\"cname\" />\n          <br />\n        </div>\n        <div className=\"card-input-wrapper\">\n          <label id=\"url-label\" forhtml=\"card-URL\">\n            Address (URL):\n          </label>\n          <br />\n          <input ref={inputImgURL} type=\"text\" id=\"card-URL\" name=\"url\" />\n          <br />\n          <br />\n        </div>\n        <div className=\"card-input-wrapper\">\n          <label id=\"description-label\" forhtml=\"card-URL\">\n            Add Buddy Description (Optional):\n          </label>\n          <br />\n          <input\n            ref={inputDescription}\n            type=\"text\"\n            id=\"card-description\"\n            name=\"description\"\n          />\n          <br />\n          <br />\n        </div>\n        <div className=\"flex right\">\n          <button\n            onClick={() => addCard()}\n            className=\"btn btn-add\"\n            type=\"button\"\n          >\n            Add New Buddy\n          </button>\n          <button\n            onClick={() => removeCard()}\n            className=\"btn btn-remove\"\n            type=\"button\"\n          >\n            Remove\n          </button>\n\n          <button\n            onClick={() => clearInput()}\n            className=\"btn btn-clear-input\"\n            type=\"button\"\n          >\n            Clear Input\n          </button>\n          <button\n            onClick={() => clearAll()}\n            className=\"btn btn-clear-all\"\n            type=\"button\"\n          >\n            Clear All\n          </button>\n        </div>\n      </form>\n\n      <BuddyList buddyList={buddyList} />\n      <Modal />\n    </div>\n  );\n}\n\nexport default StudyGroup;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}