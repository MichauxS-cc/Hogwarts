{"ast":null,"code":"import\"../css/Modal.css\";import React,{useRef}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{closeModal,switchModalMode,updateModal,setBuddyList}from\"../actions\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Modal(){const buddyListURL=\"/db/buddy\";const modal=useSelector(state=>state.cardModal);const dispatch=useDispatch();const editName=useRef();const editDescription=useRef();let visible=\"hidden\";if(modal.visible)visible=\"visible\";function finishEditing(){const updateBuddyInfo={name:editName.current.value,description:editDescription.current.value};const updateBuddy=async()=>{const response=await axios.patch(buddyListURL+\"/update/\"+modal._id,updateBuddyInfo).catch(err=>{alert(\"Error *** adding new buddy: \"+err.response.data.message);});if(response!==null&&response!==void 0&&response.data){dispatch(setBuddyList(response.data));dispatch(switchModalMode());dispatch(updateModal({name:updateBuddyInfo.name,description:updateBuddyInfo.description}));}};updateBuddy();}function renderEditableComponent(){return/*#__PURE__*/_jsxs(\"div\",{className:\"modal-container \".concat(visible),children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>dispatch(closeModal()),className:\"modal-close\",children:\"+\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-img-wrapper\",children:/*#__PURE__*/_jsx(\"img\",{className:\"modal-img\",src:modal.imgURL,alt:modal.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-text-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{ref:editName,type:\"text\",defaultValue:modal.name}),/*#__PURE__*/_jsx(\"textarea\",{id:\"input-edit-description\",ref:editDescription,type:\"text\",rows:\"10\",defaultValue:modal.description}),/*#__PURE__*/_jsx(\"button\",{onClick:finishEditing,className:\"edit-btn\",children:\"Done\"})]})})]})]});}function renderNonEditableComponent(){return/*#__PURE__*/_jsxs(\"div\",{className:\"modal-container \".concat(visible),children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>dispatch(closeModal()),className:\"modal-close\",children:\"+\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-img-wrapper\",children:/*#__PURE__*/_jsx(\"img\",{className:\"modal-img\",src:modal.imgURL,alt:modal.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-text-wrapper\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"modal-name\",children:modal.name}),/*#__PURE__*/_jsx(\"p\",{className:\"modal-description\",children:modal.description}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>dispatch(switchModalMode()),className:\"edit-btn\",children:\"Edit\"})]})]})]});}return modal.isEditable?renderEditableComponent():renderNonEditableComponent();}export default Modal;","map":{"version":3,"names":["React","useRef","useSelector","useDispatch","closeModal","switchModalMode","updateModal","setBuddyList","axios","jsx","_jsx","jsxs","_jsxs","Modal","buddyListURL","modal","state","cardModal","dispatch","editName","editDescription","visible","finishEditing","updateBuddyInfo","name","current","value","description","updateBuddy","response","patch","_id","catch","err","alert","data","message","renderEditableComponent","className","concat","children","onClick","src","imgURL","alt","ref","type","defaultValue","id","rows","renderNonEditableComponent","isEditable"],"sources":["/Users/michauxsun/Desktop/CPSC455-A234/my-hogwarts-app/src/components/Modal.js"],"sourcesContent":["import \"../css/Modal.css\";\nimport React, { useRef } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  closeModal,\n  switchModalMode,\n  updateModal,\n  setBuddyList,\n} from \"../actions\";\nimport axios from \"axios\";\n\nfunction Modal() {\n  const buddyListURL = \"/db/buddy\";\n  const modal = useSelector((state) => state.cardModal);\n  const dispatch = useDispatch();\n\n  const editName = useRef();\n  const editDescription = useRef();\n  let visible = \"hidden\";\n  if (modal.visible) visible = \"visible\";\n\n  function finishEditing() {\n    const updateBuddyInfo = {\n      name: editName.current.value,\n      description: editDescription.current.value,\n    };\n\n    const updateBuddy = async () => {\n      const response = await axios\n        .patch(buddyListURL + \"/update/\" + modal._id, updateBuddyInfo)\n        .catch((err) => {\n          alert(\"Error *** adding new buddy: \" + err.response.data.message);\n        });\n\n      if (response?.data) {\n        dispatch(setBuddyList(response.data));\n        dispatch(switchModalMode());\n        dispatch(\n          updateModal({\n            name: updateBuddyInfo.name,\n            description: updateBuddyInfo.description,\n          })\n        );\n      }\n    };\n    updateBuddy();\n  }\n\n  function renderEditableComponent() {\n    return (\n      <div className={`modal-container ${visible}`}>\n        <button onClick={() => dispatch(closeModal())} className=\"modal-close\">\n          +\n        </button>\n        <div className=\"modal-card-container\">\n          <div className=\"modal-img-wrapper\">\n            <img className=\"modal-img\" src={modal.imgURL} alt={modal.name} />\n          </div>\n          <div className=\"modal-text-wrapper\">\n            <div>\n              <input ref={editName} type=\"text\" defaultValue={modal.name} />\n              <textarea\n                id=\"input-edit-description\"\n                ref={editDescription}\n                type=\"text\"\n                rows=\"10\"\n                defaultValue={modal.description}\n              />\n              <button onClick={finishEditing} className=\"edit-btn\">\n                Done\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderNonEditableComponent() {\n    return (\n      <div className={`modal-container ${visible}`}>\n        <button onClick={() => dispatch(closeModal())} className=\"modal-close\">\n          +\n        </button>\n        <div className=\"modal-card-container\">\n          <div className=\"modal-img-wrapper\">\n            <img className=\"modal-img\" src={modal.imgURL} alt={modal.name} />\n          </div>\n          <div className=\"modal-text-wrapper\">\n            <h3 className=\"modal-name\">{modal.name}</h3>\n            <p className=\"modal-description\">{modal.description}</p>\n            <button\n              onClick={() => dispatch(switchModalMode())}\n              className=\"edit-btn\"\n            >\n              Edit\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return modal.isEditable\n    ? renderEditableComponent()\n    : renderNonEditableComponent();\n}\n\nexport default Modal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}