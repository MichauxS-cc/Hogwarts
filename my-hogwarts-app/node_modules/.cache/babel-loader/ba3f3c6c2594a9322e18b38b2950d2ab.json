{"ast":null,"code":"import _regeneratorRuntime from\"/Users/michauxsun/CPSC455/CPSC455-A234/my-hogwarts-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/michauxsun/CPSC455/CPSC455-A234/my-hogwarts-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useRef,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{setBuddyList}from\"../actions\";import\"../css/StudyGroup.css\";import BuddyList from\"./BuddyList.js\";import Modal from\"./Modal.js\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function StudyGroup(){var inputName=useRef();//to get user input\nvar inputImgURL=useRef();var inputDescription=useRef();var buddyList=useSelector(function(state){return state.buddyList;});var dispatch=useDispatch();var buddyListURL=\"/db/buddy\";useEffect(function(){var getBuddylistData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(buddyListURL);case 2:response=_context.sent;if(response===null||response===void 0?void 0:response.data)dispatch(setBuddyList(response.data));case 4:case\"end\":return _context.stop();}}},_callee);}));return function getBuddylistData(){return _ref.apply(this,arguments);};}();getBuddylistData();},[dispatch]);// add card to buddyList by creating a new array with the new user input\n// input: name, imgURL\nfunction addCard(){var name=inputName.current.value;var imgURL=inputImgURL.current.value;var description=inputDescription.current.value;if(name===\"\"||imgURL===\"\")return alert(\"Error *** adding new buddy: user name and img url can't be empty\");var newBuddy={name:name,imgURL:imgURL,description:description};var addNewBuddy=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(buddyListURL+\"/add\",newBuddy);case 2:response=_context2.sent;//optional chaining to check if response and response data both exist\nif(response===null||response===void 0?void 0:response.data)dispatch(setBuddyList(response.data));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function addNewBuddy(){return _ref2.apply(this,arguments);};}();addNewBuddy();clearInput();}function removeCard(){var removeName=inputName.current.value;console.log(\"User wants to delete: \"+(removeName===\"\"?\"empty String\":removeName));if(removeName===\"\"){return alert(\"Error *** remove a buddy: Please enter a buddy name to remove\");}var findTheBuddyToRemove=buddyList.find(function(buddy){return buddy.name===removeName;});if(!findTheBuddyToRemove){return alert(removeName+\" is not in your list.\");}var removeBuddy=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.delete(buddyListURL+\"/delete/\",{params:{name:removeName}});case 2:response=_context3.sent;if(response&&response.data)dispatch(setBuddyList(response.data));case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function removeBuddy(){return _ref3.apply(this,arguments);};}();removeBuddy();clearInput();}function clearInput(){inputName.current.value=inputImgURL.current.value=inputDescription.current.value=null;}function clearAll(){var deleteAll=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.delete(buddyListURL+\"/delete_all\").catch(function(err){console.error(err);});case 2:response=_context4.sent;if(response&&response.data)dispatch(setBuddyList(response.data));case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteAll(){return _ref4.apply(this,arguments);};}();deleteAll();clearInput();}return/*#__PURE__*/_jsxs(\"div\",{className:\"card-selection\",children:[/*#__PURE__*/_jsx(\"h1\",{children:/*#__PURE__*/_jsx(\"img\",{className:\"header-img\",src:\"https://see.fontimg.com/api/renderfont4/MVZ6w/eyJyIjoiZnMiLCJoIjo3OCwidyI6MTAwMCwiZnMiOjc4LCJmZ2MiOiIjRDBBQjIyIiwiYmdjIjoiI0YzMTkxOSIsInQiOjF9/Q2hvb3NlIFlvdXIgU3R1ZHkgQnVkZHk/harry-p.png\",alt:\"Harry Potter fonts\"})}),/*#__PURE__*/_jsxs(\"form\",{id:\"card-selection-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-input-wrapper\",children:[/*#__PURE__*/_jsx(\"label\",{id:\"name-label\",forhtml:\"card-name\",children:\"Buddy Name:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{ref:inputName,type:\"text\",id:\"card-name\",name:\"cname\"}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-input-wrapper\",children:[/*#__PURE__*/_jsx(\"label\",{id:\"url-label\",forhtml:\"card-URL\",children:\"Address (URL):\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{ref:inputImgURL,type:\"text\",id:\"card-URL\",name:\"url\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-input-wrapper\",children:[/*#__PURE__*/_jsx(\"label\",{id:\"description-label\",forhtml:\"card-URL\",children:\"Add Buddy Description (Optional):\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{ref:inputDescription,type:\"text\",id:\"card-description\",name:\"description\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex right\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return addCard();},className:\"btn btn-add\",type:\"button\",children:\"Add\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return removeCard();},className:\"btn btn-remove\",type:\"button\",children:\"Remove\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return clearInput();},className:\"btn btn-clear-input\",type:\"button\",children:\"Clear Input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return clearAll();},className:\"btn btn-clear-all\",type:\"button\",children:\"Clear All\"})]})]}),/*#__PURE__*/_jsx(BuddyList,{buddyList:buddyList}),/*#__PURE__*/_jsx(Modal,{})]});}export default StudyGroup;","map":{"version":3,"sources":["/Users/michauxsun/CPSC455/CPSC455-A234/my-hogwarts-app/src/components/StudyGroup.js"],"names":["React","useRef","useEffect","useSelector","useDispatch","setBuddyList","BuddyList","Modal","axios","StudyGroup","inputName","inputImgURL","inputDescription","buddyList","state","dispatch","buddyListURL","getBuddylistData","get","response","data","addCard","name","current","value","imgURL","description","alert","newBuddy","addNewBuddy","post","clearInput","removeCard","removeName","console","log","findTheBuddyToRemove","find","buddy","removeBuddy","delete","params","clearAll","deleteAll","catch","err","error"],"mappings":"uVAAA,MAAOA,CAAAA,KAAP,EAAgBC,MAAhB,CAAwBC,SAAxB,KAAyC,OAAzC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,YAAT,KAA6B,YAA7B,CACA,MAAO,uBAAP,CACA,MAAOC,CAAAA,SAAP,KAAsB,gBAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,YAAlB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,QAASC,CAAAA,UAAT,EAAsB,CACpB,GAAMC,CAAAA,SAAS,CAAGT,MAAM,EAAxB,CAA4B;AAC5B,GAAMU,CAAAA,WAAW,CAAGV,MAAM,EAA1B,CACA,GAAMW,CAAAA,gBAAgB,CAAGX,MAAM,EAA/B,CAEA,GAAMY,CAAAA,SAAS,CAAGV,WAAW,CAAC,SAACW,KAAD,QAAWA,CAAAA,KAAK,CAACD,SAAjB,EAAD,CAA7B,CACA,GAAME,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CACA,GAAMY,CAAAA,YAAY,CAAG,WAArB,CAEAd,SAAS,CAAC,UAAM,CACd,GAAMe,CAAAA,gBAAgB,0FAAG,sKACAT,CAAAA,KAAK,CAACU,GAAN,CAAUF,YAAV,CADA,QACjBG,QADiB,eAGvB,GAAIA,QAAJ,SAAIA,QAAJ,iBAAIA,QAAQ,CAAEC,IAAd,CAAoBL,QAAQ,CAACV,YAAY,CAACc,QAAQ,CAACC,IAAV,CAAb,CAAR,CAHG,sDAAH,kBAAhBH,CAAAA,gBAAgB,0CAAtB,CAKAA,gBAAgB,GACjB,CAPQ,CAON,CAACF,QAAD,CAPM,CAAT,CASA;AACA;AACA,QAASM,CAAAA,OAAT,EAAmB,CACjB,GAAIC,CAAAA,IAAI,CAAGZ,SAAS,CAACa,OAAV,CAAkBC,KAA7B,CACA,GAAIC,CAAAA,MAAM,CAAGd,WAAW,CAACY,OAAZ,CAAoBC,KAAjC,CACA,GAAIE,CAAAA,WAAW,CAAGd,gBAAgB,CAACW,OAAjB,CAAyBC,KAA3C,CAEA,GAAIF,IAAI,GAAK,EAAT,EAAeG,MAAM,GAAK,EAA9B,CACE,MAAOE,CAAAA,KAAK,CACV,kEADU,CAAZ,CAIF,GAAMC,CAAAA,QAAQ,CAAG,CACfN,IAAI,CAAEA,IADS,CAEfG,MAAM,CAAEA,MAFO,CAGfC,WAAW,CAAEA,WAHE,CAAjB,CAMA,GAAMG,CAAAA,WAAW,2FAAG,4KACKrB,CAAAA,KAAK,CAACsB,IAAN,CAAWd,YAAY,CAAG,MAA1B,CAAkCY,QAAlC,CADL,QACZT,QADY,gBAGlB;AACA,GAAIA,QAAJ,SAAIA,QAAJ,iBAAIA,QAAQ,CAAEC,IAAd,CAAoBL,QAAQ,CAACV,YAAY,CAACc,QAAQ,CAACC,IAAV,CAAb,CAAR,CAJF,wDAAH,kBAAXS,CAAAA,WAAW,2CAAjB,CAOAA,WAAW,GACXE,UAAU,GACX,CAED,QAASC,CAAAA,UAAT,EAAsB,CACpB,GAAMC,CAAAA,UAAU,CAAGvB,SAAS,CAACa,OAAV,CAAkBC,KAArC,CACAU,OAAO,CAACC,GAAR,CACE,0BACGF,UAAU,GAAK,EAAf,CAAoB,cAApB,CAAqCA,UADxC,CADF,EAKA,GAAIA,UAAU,GAAK,EAAnB,CAAuB,CACrB,MAAON,CAAAA,KAAK,CACV,+DADU,CAAZ,CAGD,CACD,GAAMS,CAAAA,oBAAoB,CAAGvB,SAAS,CAACwB,IAAV,CAC3B,SAACC,KAAD,QAAWA,CAAAA,KAAK,CAAChB,IAAN,GAAeW,UAA1B,EAD2B,CAA7B,CAGA,GAAI,CAACG,oBAAL,CAA2B,CACzB,MAAOT,CAAAA,KAAK,CAACM,UAAU,CAAG,uBAAd,CAAZ,CACD,CAED,GAAMM,CAAAA,WAAW,2FAAG,4KACK/B,CAAAA,KAAK,CAACgC,MAAN,CAAaxB,YAAY,CAAG,UAA5B,CAAwC,CAC7DyB,MAAM,CAAE,CAAEnB,IAAI,CAAEW,UAAR,CADqD,CAAxC,CADL,QACZd,QADY,gBAKlB,GAAIA,QAAQ,EAAIA,QAAQ,CAACC,IAAzB,CAA+BL,QAAQ,CAACV,YAAY,CAACc,QAAQ,CAACC,IAAV,CAAb,CAAR,CALb,wDAAH,kBAAXmB,CAAAA,WAAW,2CAAjB,CAOAA,WAAW,GAEXR,UAAU,GACX,CAED,QAASA,CAAAA,UAAT,EAAsB,CACpBrB,SAAS,CAACa,OAAV,CAAkBC,KAAlB,CACEb,WAAW,CAACY,OAAZ,CAAoBC,KAApB,CACAZ,gBAAgB,CAACW,OAAjB,CAAyBC,KAAzB,CACE,IAHJ,CAID,CAED,QAASkB,CAAAA,QAAT,EAAoB,CAClB,GAAMC,CAAAA,SAAS,2FAAG,4KACOnC,CAAAA,KAAK,CACzBgC,MADoB,CACbxB,YAAY,CAAG,aADF,EAEpB4B,KAFoB,CAEd,SAACC,GAAD,CAAS,CACdX,OAAO,CAACY,KAAR,CAAcD,GAAd,EACD,CAJoB,CADP,QACV1B,QADU,gBAOhB,GAAIA,QAAQ,EAAIA,QAAQ,CAACC,IAAzB,CAA+BL,QAAQ,CAACV,YAAY,CAACc,QAAQ,CAACC,IAAV,CAAb,CAAR,CAPf,wDAAH,kBAATuB,CAAAA,SAAS,2CAAf,CAUAA,SAAS,GACTZ,UAAU,GACX,CAED,mBACE,aAAK,SAAS,CAAC,gBAAf,wBACE,iCACE,YACE,SAAS,CAAC,YADZ,CAEE,GAAG,CAAC,4LAFN,CAGE,GAAG,CAAC,oBAHN,EADF,EADF,cAQE,cAAM,EAAE,CAAC,qBAAT,wBACE,aAAK,SAAS,CAAC,oBAAf,wBACE,cAAO,EAAE,CAAC,YAAV,CAAuB,OAAO,CAAC,WAA/B,yBADF,cAIE,aAJF,cAKE,cAAO,GAAG,CAAErB,SAAZ,CAAuB,IAAI,CAAC,MAA5B,CAAmC,EAAE,CAAC,WAAtC,CAAkD,IAAI,CAAC,OAAvD,EALF,cAME,aANF,GADF,cASE,aAAK,SAAS,CAAC,oBAAf,wBACE,cAAO,EAAE,CAAC,WAAV,CAAsB,OAAO,CAAC,UAA9B,4BADF,cAIE,aAJF,cAKE,cAAO,GAAG,CAAEC,WAAZ,CAAyB,IAAI,CAAC,MAA9B,CAAqC,EAAE,CAAC,UAAxC,CAAmD,IAAI,CAAC,KAAxD,EALF,cAME,aANF,cAOE,aAPF,GATF,cAkBE,aAAK,SAAS,CAAC,oBAAf,wBACE,cAAO,EAAE,CAAC,mBAAV,CAA8B,OAAO,CAAC,UAAtC,+CADF,cAIE,aAJF,cAKE,cACE,GAAG,CAAEC,gBADP,CAEE,IAAI,CAAC,MAFP,CAGE,EAAE,CAAC,kBAHL,CAIE,IAAI,CAAC,aAJP,EALF,cAWE,aAXF,cAYE,aAZF,GAlBF,cAgCE,aAAK,SAAS,CAAC,YAAf,wBACE,eACE,OAAO,CAAE,yBAAMS,CAAAA,OAAO,EAAb,EADX,CAEE,SAAS,CAAC,aAFZ,CAGE,IAAI,CAAC,QAHP,iBADF,cAQE,eACE,OAAO,CAAE,yBAAMW,CAAAA,UAAU,EAAhB,EADX,CAEE,SAAS,CAAC,gBAFZ,CAGE,IAAI,CAAC,QAHP,oBARF,cAgBE,eACE,OAAO,CAAE,yBAAMD,CAAAA,UAAU,EAAhB,EADX,CAEE,SAAS,CAAC,qBAFZ,CAGE,IAAI,CAAC,QAHP,yBAhBF,cAuBE,eACE,OAAO,CAAE,yBAAMW,CAAAA,QAAQ,EAAd,EADX,CAEE,SAAS,CAAC,mBAFZ,CAGE,IAAI,CAAC,QAHP,uBAvBF,GAhCF,GARF,cAyEE,KAAC,SAAD,EAAW,SAAS,CAAE7B,SAAtB,EAzEF,cA0EE,KAAC,KAAD,IA1EF,GADF,CA8ED,CAED,cAAeJ,CAAAA,UAAf","sourcesContent":["import React, { useRef, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setBuddyList } from \"../actions\";\nimport \"../css/StudyGroup.css\";\nimport BuddyList from \"./BuddyList.js\";\nimport Modal from \"./Modal.js\";\n\nimport axios from \"axios\";\n\nfunction StudyGroup() {\n  const inputName = useRef(); //to get user input\n  const inputImgURL = useRef();\n  const inputDescription = useRef();\n\n  const buddyList = useSelector((state) => state.buddyList);\n  const dispatch = useDispatch();\n  const buddyListURL = \"/db/buddy\";\n\n  useEffect(() => {\n    const getBuddylistData = async () => {\n      const response = await axios.get(buddyListURL);\n\n      if (response?.data) dispatch(setBuddyList(response.data));\n    };\n    getBuddylistData();\n  }, [dispatch]);\n\n  // add card to buddyList by creating a new array with the new user input\n  // input: name, imgURL\n  function addCard() {\n    let name = inputName.current.value;\n    let imgURL = inputImgURL.current.value;\n    let description = inputDescription.current.value;\n\n    if (name === \"\" || imgURL === \"\")\n      return alert(\n        \"Error *** adding new buddy: user name and img url can't be empty\"\n      );\n\n    const newBuddy = {\n      name: name,\n      imgURL: imgURL,\n      description: description,\n    };\n\n    const addNewBuddy = async () => {\n      const response = await axios.post(buddyListURL + \"/add\", newBuddy);\n\n      //optional chaining to check if response and response data both exist\n      if (response?.data) dispatch(setBuddyList(response.data));\n    };\n\n    addNewBuddy();\n    clearInput();\n  }\n\n  function removeCard() {\n    const removeName = inputName.current.value;\n    console.log(\n      \"User wants to delete: \" +\n        (removeName === \"\" ? \"empty String\" : removeName)\n    );\n\n    if (removeName === \"\") {\n      return alert(\n        \"Error *** remove a buddy: Please enter a buddy name to remove\"\n      );\n    }\n    const findTheBuddyToRemove = buddyList.find(\n      (buddy) => buddy.name === removeName\n    );\n    if (!findTheBuddyToRemove) {\n      return alert(removeName + \" is not in your list.\");\n    }\n\n    const removeBuddy = async () => {\n      const response = await axios.delete(buddyListURL + \"/delete/\", {\n        params: { name: removeName },\n      });\n\n      if (response && response.data) dispatch(setBuddyList(response.data));\n    };\n    removeBuddy();\n\n    clearInput();\n  }\n\n  function clearInput() {\n    inputName.current.value =\n      inputImgURL.current.value =\n      inputDescription.current.value =\n        null;\n  }\n\n  function clearAll() {\n    const deleteAll = async () => {\n      const response = await axios\n        .delete(buddyListURL + \"/delete_all\")\n        .catch((err) => {\n          console.error(err);\n        });\n\n      if (response && response.data) dispatch(setBuddyList(response.data));\n    };\n\n    deleteAll();\n    clearInput();\n  }\n\n  return (\n    <div className=\"card-selection\">\n      <h1>\n        <img\n          className=\"header-img\"\n          src=\"https://see.fontimg.com/api/renderfont4/MVZ6w/eyJyIjoiZnMiLCJoIjo3OCwidyI6MTAwMCwiZnMiOjc4LCJmZ2MiOiIjRDBBQjIyIiwiYmdjIjoiI0YzMTkxOSIsInQiOjF9/Q2hvb3NlIFlvdXIgU3R1ZHkgQnVkZHk/harry-p.png\"\n          alt=\"Harry Potter fonts\"\n        ></img>\n      </h1>\n      <form id=\"card-selection-form\">\n        <div className=\"card-input-wrapper\">\n          <label id=\"name-label\" forhtml=\"card-name\">\n            Buddy Name:\n          </label>\n          <br />\n          <input ref={inputName} type=\"text\" id=\"card-name\" name=\"cname\" />\n          <br />\n        </div>\n        <div className=\"card-input-wrapper\">\n          <label id=\"url-label\" forhtml=\"card-URL\">\n            Address (URL):\n          </label>\n          <br />\n          <input ref={inputImgURL} type=\"text\" id=\"card-URL\" name=\"url\" />\n          <br />\n          <br />\n        </div>\n        <div className=\"card-input-wrapper\">\n          <label id=\"description-label\" forhtml=\"card-URL\">\n            Add Buddy Description (Optional):\n          </label>\n          <br />\n          <input\n            ref={inputDescription}\n            type=\"text\"\n            id=\"card-description\"\n            name=\"description\"\n          />\n          <br />\n          <br />\n        </div>\n        <div className=\"flex right\">\n          <button\n            onClick={() => addCard()}\n            className=\"btn btn-add\"\n            type=\"button\"\n          >\n            Add\n          </button>\n          <button\n            onClick={() => removeCard()}\n            className=\"btn btn-remove\"\n            type=\"button\"\n          >\n            Remove\n          </button>\n\n          <button\n            onClick={() => clearInput()}\n            className=\"btn btn-clear-input\"\n            type=\"button\"\n          >\n            Clear Input\n          </button>\n          <button\n            onClick={() => clearAll()}\n            className=\"btn btn-clear-all\"\n            type=\"button\"\n          >\n            Clear All\n          </button>\n        </div>\n      </form>\n\n      <BuddyList buddyList={buddyList} />\n      <Modal />\n    </div>\n  );\n}\n\nexport default StudyGroup;\n"]},"metadata":{},"sourceType":"module"}