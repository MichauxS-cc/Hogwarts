{"ast":null,"code":"import _regeneratorRuntime from\"/Users/michauxsun/CPSC455/CPSC455-A234/my_hogwarts_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/michauxsun/CPSC455/CPSC455-A234/my_hogwarts_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import\"../css/Modal.css\";import React,{useRef}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{closeModal,switchModalMode,updateModal,setBuddyList}from\"../actions\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Modal(){var buddyListURL=\"/db/buddy\";var modal=useSelector(function(state){return state.cardModal;});var dispatch=useDispatch();var editName=useRef();var editDescription=useRef();var visible=\"hidden\";if(modal.visible)visible=\"visible\";function finishEditing(){var updateBuddyInfo={name:editName.current.value,description:editDescription.current.value};var updateBuddy=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.patch(buddyListURL+\"/update/\"+modal._id,updateBuddyInfo).catch(function(err){alert(\"Error *** adding new buddy: \"+err.response.data.message);});case 2:response=_context.sent;if(response===null||response===void 0?void 0:response.data){dispatch(setBuddyList(response.data));dispatch(switchModalMode());dispatch(updateModal({name:updateBuddyInfo.name,description:updateBuddyInfo.description}));}case 4:case\"end\":return _context.stop();}}},_callee);}));return function updateBuddy(){return _ref.apply(this,arguments);};}();updateBuddy();}function renderEditableComponent(){return/*#__PURE__*/_jsxs(\"div\",{className:\"modal-container \".concat(visible),children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return dispatch(closeModal());},className:\"modal-close\",children:\"+\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-img-wrapper\",children:/*#__PURE__*/_jsx(\"img\",{className:\"modal-img\",src:modal.imgURL,alt:modal.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-text-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{ref:editName,type:\"text\",defaultValue:modal.name}),/*#__PURE__*/_jsx(\"textarea\",{id:\"input-edit-description\",ref:editDescription,type:\"text\",rows:\"10\",defaultValue:modal.description}),/*#__PURE__*/_jsx(\"button\",{onClick:finishEditing,className:\"edit-btn\",children:\"Done\"})]})})]})]});}function renderNonEditableComponent(){return/*#__PURE__*/_jsxs(\"div\",{className:\"modal-container \".concat(visible),children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return dispatch(closeModal());},className:\"modal-close\",children:\"+\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-img-wrapper\",children:/*#__PURE__*/_jsx(\"img\",{className:\"modal-img\",src:modal.imgURL,alt:modal.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-text-wrapper\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"modal-name\",children:modal.name}),/*#__PURE__*/_jsx(\"p\",{className:\"modal-description\",children:modal.description}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return dispatch(switchModalMode());},className:\"edit-btn\",children:\"Edit\"})]})]})]});}return modal.isEditable?renderEditableComponent():renderNonEditableComponent();}export default Modal;","map":{"version":3,"sources":["/Users/michauxsun/CPSC455/CPSC455-A234/my_hogwarts_app/src/components/Modal.js"],"names":["React","useRef","useSelector","useDispatch","closeModal","switchModalMode","updateModal","setBuddyList","axios","Modal","buddyListURL","modal","state","cardModal","dispatch","editName","editDescription","visible","finishEditing","updateBuddyInfo","name","current","value","description","updateBuddy","patch","_id","catch","err","alert","response","data","message","renderEditableComponent","imgURL","renderNonEditableComponent","isEditable"],"mappings":"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","sourcesContent":["import \"../css/Modal.css\";\nimport React, { useRef } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  closeModal,\n  switchModalMode,\n  updateModal,\n  setBuddyList,\n} from \"../actions\";\nimport axios from \"axios\";\n\nfunction Modal() {\n  const buddyListURL = \"/db/buddy\";\n  const modal = useSelector((state) => state.cardModal);\n  const dispatch = useDispatch();\n\n  const editName = useRef();\n  const editDescription = useRef();\n  let visible = \"hidden\";\n  if (modal.visible) visible = \"visible\";\n\n  function finishEditing() {\n    const updateBuddyInfo = {\n      name: editName.current.value,\n      description: editDescription.current.value,\n    };\n\n    const updateBuddy = async () => {\n      const response = await axios\n        .patch(buddyListURL + \"/update/\" + modal._id, updateBuddyInfo)\n        .catch((err) => {\n          alert(\"Error *** adding new buddy: \" + err.response.data.message);\n        });\n\n      if (response?.data) {\n        dispatch(setBuddyList(response.data));\n        dispatch(switchModalMode());\n        dispatch(\n          updateModal({\n            name: updateBuddyInfo.name,\n            description: updateBuddyInfo.description,\n          })\n        );\n      }\n    };\n    updateBuddy();\n  }\n\n  function renderEditableComponent() {\n    return (\n      <div className={`modal-container ${visible}`}>\n        <button onClick={() => dispatch(closeModal())} className=\"modal-close\">\n          +\n        </button>\n        <div className=\"modal-card-container\">\n          <div className=\"modal-img-wrapper\">\n            <img className=\"modal-img\" src={modal.imgURL} alt={modal.name} />\n          </div>\n          <div className=\"modal-text-wrapper\">\n            <div>\n              <input ref={editName} type=\"text\" defaultValue={modal.name} />\n              <textarea\n                id=\"input-edit-description\"\n                ref={editDescription}\n                type=\"text\"\n                rows=\"10\"\n                defaultValue={modal.description}\n              />\n              <button onClick={finishEditing} className=\"edit-btn\">\n                Done\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderNonEditableComponent() {\n    return (\n      <div className={`modal-container ${visible}`}>\n        <button onClick={() => dispatch(closeModal())} className=\"modal-close\">\n          +\n        </button>\n        <div className=\"modal-card-container\">\n          <div className=\"modal-img-wrapper\">\n            <img className=\"modal-img\" src={modal.imgURL} alt={modal.name} />\n          </div>\n          <div className=\"modal-text-wrapper\">\n            <h3 className=\"modal-name\">{modal.name}</h3>\n            <p className=\"modal-description\">{modal.description}</p>\n            <button\n              onClick={() => dispatch(switchModalMode())}\n              className=\"edit-btn\"\n            >\n              Edit\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return modal.isEditable\n    ? renderEditableComponent()\n    : renderNonEditableComponent();\n}\n\nexport default Modal;\n"]},"metadata":{},"sourceType":"module"}